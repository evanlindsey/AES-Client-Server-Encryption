function Main(n){this.crypto=n;this.success=null;this.error=null;var t=this;this.initHandlers=function(){$("#encrypt-client").on("click",t.clientCrypto);$("#decrypt-client").on("click",t.clientCrypto);$("#encrypt-server").on("click",t.serverCrypto);$("#decrypt-server").on("click",t.serverCrypto);$("#create-key").on("click",t.createKey);$("#set-key").on("click",t.updateKey);$("#delete-key").on("click",t.deleteKey);$("#clear-encrypted").on("click",function(){$("#toDecrypt").val("")});$("#clear-decrypted").on("click",function(){$("#toEncrypt").val("")});t.success=$("#success");t.error=$("#error")};this.clientCrypto=function(n){var i=n.target.name,f=$("#to"+i).val(),r,u;if(f!="")if(r=t.readKey(),r!=null&&r.length==32)try{i=="Encrypt"?(u=t.crypto.encrypt(f,r),$("#toDecrypt").val(u)):i=="Decrypt"&&(u=t.crypto.decrypt(f,r),$("#toEncrypt").val(u));u!=""?t.showSuccess("Text "+i+"ed on CLIENT"):t.showError("Error in "+i+"ion")}catch(e){t.showError(e.message)}else t.showError("Key Cookie is not Present");else t.showError("Input String is Empty")};this.serverCrypto=function(n){var i=n.target.name,r=$("#to"+i).val();$.get("api/crypto/"+i,{input:r}).done(function(n){i=="Encrypt"?$("#toDecrypt").val(n):i=="Decrypt"&&$("#toEncrypt").val(n);t.showSuccess("Text "+i+"ed on SERVER")}).fail(function(n){t.showError(n.responseText)})};this.createKey=function(){for(var n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",r=0;r<32;r++)n+=i.charAt(Math.floor(Math.random()*i.length));$("#key").val(n);t.showSuccess("Key Created")};this.readKey=function(){var n="; "+document.cookie;return n=n.split("; key="),n.length==2?n[1].split(";")[0]:null};this.updateKey=function(){var n=$("#key").val();n.length==32?(document.cookie="key="+n,t.showSuccess("Key Cookie Set")):t.showError("Key Must Be 32 Characters")};this.deleteKey=function(){document.cookie="key=; expires=Thu, 01 Jan 1970 00:00:00 UTC";$("#key").val("");t.showSuccess("Key Cookie Deleted")};this.showSuccess=function(n){t.error.empty();t.error.hide();t.success.show();t.success.html("> "+n)};this.showError=function(n){t.success.empty();t.success.hide();t.error.show();t.error.html("> "+n)}}$(document).ready(function(){var n,t;$.when($.getScript("./js/aes.js"),$.getScript("./js/crypto.js")).done(function(){n=new Crypto;t=new Main(n);t.initHandlers()})});